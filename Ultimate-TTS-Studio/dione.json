{
    "requirements": {
      "os": ["windows", "linux"],
      "gpus": ["nvidia"]
    },
  "dependencies": {
    "git": {
      "version": "latest"
    },
    "uv": {
      "version": "latest"
    }
  },
  "installation": [
    {
      "name": "Cloning repository",
      "commands": [
        "git clone https://github.com/SUP3RMASS1VE/Ultimate-TTS-Studio-SUP3R-Edition.git Ultimate-TTS-Studio-SUP3R-Edition"
      ]
    },
    {
      "name": "Installing espeak-ng",
      "commands": [
        "cd Ultimate-TTS-Studio-SUP3R-Edition",
        { "platform": "windows", "command": "powershell -Command \"$job = Start-Job -ScriptBlock { winget install --id=eSpeak-NG.eSpeak-NG -e --silent --accept-source-agreements --accept-package-agreements --force --disable-interactivity }; Wait-Job $job -Timeout 60; Remove-Job $job -Force; Write-Host 'espeak-ng installation completed'\"" },
        { "platform": "linux", "command": "sudo apt-get install -y espeak-ng" }
      ]
    },
    {
      "name": "Creating conda environment",
      "env": {
        "name": "ultimate-tts",
        "type": "conda",
        "version": "3.10"
      },
      "commands": [
        "cd Ultimate-TTS-Studio-SUP3R-Edition",
        "conda install -c conda-forge pynini==2.1.6 -y",
        "conda install -y -c conda-forge portaudio",
        "uv pip install -r requirements.txt",
        "uv pip install --upgrade --force-reinstall --no-deps --no-cache-dir onnxruntime-gpu==1.22.0",
        "pip install phonemizer-fork",
        "uv pip install WeTextProcessing --no-deps",
        "uv pip install voxcpm openai-whisper --no-deps",
        { "platform": "windows", "command": "uv pip install torch==2.7.0 torchvision==0.22.0 torchaudio==2.7.0 --index-url https://download.pytorch.org/whl/cu128 --force-reinstall --no-deps" },
        { "platform": "windows", "command": "uv pip install https://github.com/mjun0812/flash-attention-prebuild-wheels/releases/download/v0.4.10/flash_attn-2.8.2+cu128torch2.7-cp310-cp310-win_amd64.whl" },
        { "platform": "windows", "command": "uv pip install triton-windows==3.3.1.post19" },
        { "platform": "linux", "command": "uv pip install torch==2.7.0 torchvision==0.22.0 torchaudio==2.7.0 --index-url https://download.pytorch.org/whl/cu128 --force-reinstall" },
        { "platform": "linux", "command": "uv pip install https://github.com/mjun0812/flash-attention-prebuild-wheels/releases/download/v0.4.11/flash_attn-2.8.3+cu128torch2.7-cp310-cp310-linux_x86_64.whl" },
        { "platform": "linux", "command": "uv pip install triton" },
        { "platform": "linux", "command": "uv pip install numpy==1.26.0" }
      ]
    },
    {
      "name": "Downloading Fish Speech model",
      "env": {
        "name": "ultimate-tts",
        "type": "conda"
      },
      "commands": [
        "cd Ultimate-TTS-Studio-SUP3R-Edition",
        "hf download cocktailpeanut/oa --local-dir ./checkpoints/openaudio-s1-mini"
      ]
    }
  ],
  "start": [
    {
      "name": "Starting Ultimate TTS Studio",
      "catch": "7860",
      "env": {
        "name": "ultimate-tts",
        "type": "conda"
      },
      "commands": [
        "cd Ultimate-TTS-Studio-SUP3R-Edition",
        "uv run launch.py"
      ]
    }
  ]
}
